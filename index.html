<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Utilities Performance Dashboard</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
  --bg1:#2b1055;
  --bg2:#0f766e;
  --cyan:#22d3ee;
  --text:#e5e7eb;
}

*{box-sizing:border-box;font-family:Inter,Segoe UI,Arial}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
}

.header{
  text-align:center;
  padding:40px 20px 10px;
}

.header h1{
  font-size:38px;
  margin:0;
  background:linear-gradient(90deg,#60a5fa,#a855f7,#22d3ee);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.header p{
  opacity:.8;
  margin-top:8px;
}

/* Loader */
#loadingIndicator{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:60vh;
}

.spinner{
  width:56px;
  height:56px;
  border:4px solid rgba(255,255,255,.15);
  border-top:4px solid var(--cyan);
  border-radius:50%;
  animation:spin 1s linear infinite;
}

@keyframes spin{
  to{transform:rotate(360deg)}
}

#loadingIndicator span{
  margin-top:18px;
  color:var(--cyan);
  font-size:18px;
}

/* Error */
#errorContainer{
  display:none;
  text-align:center;
  padding:40px;
  color:#f87171;
  font-size:18px;
}

/* Dashboard */
#dashboard{
  display:none;
  padding:20px;
}

.card{
  background:rgba(255,255,255,.08);
  border-radius:16px;
  padding:20px;
  margin-bottom:20px;
}

pre{
  white-space:pre-wrap;
  word-break:break-word;
  font-size:13px;
  color:#a7f3d0;
}
</style>
</head>

<body>

<div class="header">
  <h1>⚡ Utilities Performance Dashboard</h1>
  <p>Real-time Performance Monitoring & Analytics</p>
</div>

<div id="loadingIndicator">
  <div class="spinner"></div>
  <span>Loading dashboard data...</span>
</div>

<div id="errorContainer"></div>

<div id="dashboard">
  <div class="card">
    <h3>CSV Data Preview (first rows)</h3>
    <pre id="csvPreview"></pre>
  </div>
</div>

<script>
/* ===============================
   CSV LOAD (GITHUB PAGES SAFE)
================================ */

const CSV_URL = "data.csv?v=" + Date.now();

fetch(CSV_URL, { cache: "no-store" })
  .then(res => {
    if (!res.ok) throw new Error("CSV file not found");
    return res.text();
  })
  .then(csv => {
    console.log("CSV loaded successfully");

    // Hide loader
    document.getElementById("loadingIndicator").style.display = "none";
    document.getElementById("dashboard").style.display = "block";

    // Show preview
    document.getElementById("csvPreview").textContent =
      csv.split("\n").slice(0,10).join("\n");
  })
  .catch(err => {
    console.error(err);
    document.getElementById("loadingIndicator").style.display = "none";
    const e = document.getElementById("errorContainer");
    e.style.display = "block";
    e.innerHTML = "❌ Failed to load data.csv<br><br>" + err.message;
  });
</script>

</body>
</html>
